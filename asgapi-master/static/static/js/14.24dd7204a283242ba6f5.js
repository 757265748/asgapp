webpackJsonp([14],{"3owz":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),o=a.n(n),r=a("Gu7T"),i=a.n(r),c=a("Dd8w"),l=a.n(c),d=a("D/cR");var s=[{title:"运营商PID",dataIndex:"OperatorPID",sorter:!0,width:"20%"},{title:"运营商名称",dataIndex:"OperatorName",width:"20%",scopedSlots:{customRender:"OperatorName"}},{title:"运营商代号",dataIndex:"OperatorCode",scopedSlots:{customRender:"OperatorCode"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],u={mounted:function(){this.fetch()},data:function(){return{data:[],pagination:{},loading:!1,columns:s}},methods:{handleTableChange:function(t,e,a){console.log(t);var n=l()({},this.pagination);n.current=t.current,this.pagination=n,this.fetch(l()({results:t.pageSize,page:t.current,sortField:a.field,sortOrder:a.order},e))},fetch:function(){var t,e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("params:",a),this.loading=!0,(t={},Object(d.a)({url:"api/post/pc/operatordetail-select",method:"post",data:t})).then(function(t){console.log("请求到的数据",t);var a=l()({},e.pagination);a.total=t.data.results.length,e.loading=!1,e.data=t.data.results,e.data.forEach(function(t,e){t.key=e.toString()}),e.cacheData=e.data.map(function(t){return l()({},t)}),e.pagination=a,console.log("请求到的数据",e.data)})},handleChange:function(t,e,a,n){var o=[].concat(i()(this.data)),r=o.filter(function(t){return e===t.key})[0];r&&(r[a]=t,this.data=o)},edit:function(t){var e=[].concat(i()(this.data)),a=e.filter(function(e){return t===e.key})[0];a&&(a.editable=!0,this.data=e)},save:function(t,e){var a,n=[].concat(i()(this.data));console.log("newData",n[e]),(a=n[e],Object(d.a)({url:"api/post/pc/operatordetail-update",method:"post",data:a})).then(function(t){console.log("请求到的数据save",t)});var o=n.filter(function(e){return t===e.key})[e];o&&(delete o.editable,this.data=n,console.log("newData",n[e].OperatorPID),this.cacheData=n.map(function(t){return l()({},t)}))},cancel:function(t){var e=[].concat(i()(this.data)),a=e.filter(function(e){return t===e.key})[0];a&&(o()(a,this.cacheData.filter(function(e){return t===e.key})[0]),delete a.editable,this.data=e)},onDelete:function(t,e){var a,n=[].concat(i()(this.data));console.log("key",t),(a=n[e],Object(d.a)({url:"api/post/pc/operatordetail-delete",method:"post",data:a})).then(function(t){});var o=n.filter(function(e){return e.OperatorPID!==t});console.log("newData1",o),this.data=n.filter(function(e){return e.OperatorPID!==t})},handleAdd:function(){var t=this,e=this.data,a=e.length,n="";(function(t){return Object(d.a)({url:"api/post/pc/pidtable",method:"post",data:t})})({}).then(function(o){if(o.data.results.length>0){n=o.data.results[0].pid,console.log("pid",n);var r={OperatorPID:n,OperatorName:"",OperatorCode:"",editable:!0};t.data=[].concat(i()(e),[r]);var c=[].concat(i()(t.data)),l=c.filter(function(t){return a===t.key})[a];l&&(l.editable=!0,t.data=c)}else t.$message.info("没有可用的PID")})},onCellChange:function(t,e){var a=this;return function(n){var o=[].concat(i()(a.data)),r=o.find(function(e){return e.key===t});r&&(r[e]=n,a.data=o)}}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-table",{staticClass:"table",attrs:{columns:t.columns,dataSource:t.data,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([t._l(["OperatorPID","OperatorName","OperatorCode"],function(e,n){return{key:e,fn:function(n,o,r){return[a("div",{key:r},[o.editable?a("a-input",{staticStyle:{margin:"-5px 0"},attrs:{value:n},on:{change:function(a){return t.handleChange(a.target.value,o.key,e,r)}}}):[t._v(t._s(n))]],2)]}}}),{key:"operation",fn:function(e,n,o){return[a("div",{staticClass:"editable-row-operations"},[n.editable?a("span",[a("a",{on:{click:function(){return t.save(n.key,o)}}},[t._v("保存")]),t._v(" "),a("a-popconfirm",{attrs:{title:"确定要取消?"},on:{confirm:function(){return t.cancel(n.key)}}},[a("a",[t._v("取消")])])],1):a("span",[a("a",{on:{click:function(){return t.edit(n.key)}}},[t._v("修改")]),t._v(" "),a("a-popconfirm",{attrs:{title:"确定要删除?"},on:{confirm:function(){return t.onDelete(n.OperatorPID,o)}}},[a("a",[t._v("删除")])]),t._v(" "),a("a",{on:{click:function(){return t.handleAdd(n.key,o)}}},[t._v("新增")])],1)])]}}])})],1)},staticRenderFns:[]};var f=a("VU/8")(u,p,!1,function(t){a("4iGn")},"data-v-385f772a",null);e.default=f.exports},"4iGn":function(t,e){}});
//# sourceMappingURL=14.24dd7204a283242ba6f5.js.map