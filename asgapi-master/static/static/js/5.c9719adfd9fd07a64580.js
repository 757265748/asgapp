webpackJsonp([5],{"7xge":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),r=a("YMgw"),o=a("NYxO"),l=a("Dtsh"),s=a("d2gY"),c={computed:n()({},Object(o.b)(["operatorcode"])),mounted:function(){this.fetch()},data:function(){return{previewVisible:!1,previewImage:"",fileList:[{}],data:[],num_iid:"",pic_url:[],uploadurl:s.a+"api/post/upload/pic_url"}},methods:{handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleChange:function(e){var t=e.fileList;this.fileList=t,t[0]&&t[0].response&&(this.pic_url.push(t[0].response.result),console.log("pic",this.pic_url))},fetch:function(){var e=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0;Object(l.a)({OperatorCode:this.operatorcode}).then(function(t){var a=n()({},e.pagination);a.total=t.data.results.length,e.loading=!1,e.data=t.data.results,console.log("data",e.data),e.pagination=a})},handleSearch:function(e){var t=this;fetch(e,function(e){return t.data=e})},handleChange1:function(e){var t=this;console.log("num_iid",e),this.num_iid=e,fetch(e,function(e){return t.data=e})},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){e||(a.OperatorCode=t.operatorcode,a.pic_url=t.pic_url,delete a.pict_url,delete a.small_images,Object(r.b)(a).then(function(e){200==e.data.code&&(t.$message.success("新增成功！",4),t.$router.push("./itemidnews"))}),console.log("values",a))})}}},u={render:function(){var e=this,t=this,a=t.$createElement,i=t._self._c||a;return i("a-form",{attrs:{autoFormCreate:function(t){e.form=t}},on:{submit:t.handleSubmit}},[i("a-form-item",{attrs:{label:"商品ID",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"num_iid",fieldDecoratorOptions:{rules:[{required:!0,message:"请选择商品ID"}]}}},[i("a-select",{staticStyle:{width:"200px"},attrs:{showSearch:"",placeholder:"选择商品ID",defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,notFoundContent:null},on:{search:t.handleSearch,change:t.handleChange1}},t._l(t.data,function(e){return i("a-select-option",{key:e.num_iid},[t._v(t._s(e.num_iid))])}))],1),t._v(" "),i("a-form-item",{attrs:{label:"新闻内容",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"itemid_content",fieldDecoratorOptions:{rules:[{type:"string",required:!0}]}}},[i("a-input",{attrs:{id:"itemid_content"}})],1),t._v(" "),i("a-form-item",{attrs:{label:"商品主图",labelCol:{span:5},wrapperCol:{span:12},fieldDecoratorId:"pict_url",fieldDecoratorOptions:{rules:[]}}},[i("a-upload",{attrs:{label:"商品主图",action:t.uploadurl,listType:"picture-card"},on:{preview:t.handlePreview,change:t.handleChange}},[t.fileList.length<2?i("div",[i("a-icon",{attrs:{type:"plus"}}),t._v(" "),i("div",{staticClass:"ant-upload-text"},[t._v("上传图片")])],1):t._e()]),t._v(" "),i("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[i("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1),t._v(" "),i("a-form-item",{attrs:{wrapperCol:{span:12,offset:5}}},[i("a-button",{attrs:{type:"primary",htmlType:"submit"}},[t._v("新增")])],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(e){a("ArV3")},null,null);t.default=d.exports},ArV3:function(e,t){},YMgw:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"a",function(){return o});var i=a("D/cR");function n(e){return Object(i.a)({url:"api/post/pc/itemid_news-select",method:"post",data:e})}function r(e){return Object(i.a)({url:"api/post/pc/itemid_news-insert",method:"post",data:e})}function o(e){return Object(i.a)({url:"api/post/pc/itemid_news-delete",method:"post",data:e})}}});
//# sourceMappingURL=5.c9719adfd9fd07a64580.js.map