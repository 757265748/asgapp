(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/common/share"],{"19b1":function(e,s,t){},5369:function(e,s,t){"use strict";var a=t("19b1"),o=t.n(a);o.a},5517:function(e,s,t){"use strict";(function(e,a){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=n(t("ab35")),i=t("8c24");function n(e){return e&&e.__esModule?e:{default:e}}function r(e,s){return l(e)||c(e,s)||h()}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(e,s){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var t=[],a=!0,o=!1,i=void 0;try{for(var n,r=e[Symbol.iterator]();!(a=(n=r.next()).done);a=!0)if(t.push(n.value),s&&t.length===s)break}catch(h){o=!0,i=h}finally{try{a||null==r["return"]||r["return"]()}finally{if(o)throw i}}return t}}function l(e){if(Array.isArray(e))return e}var u=function(){t.e("components/uni-popup").then(function(){return resolve(t("7594"))}.bind(null,t)).catch(t.oe)},m={components:{uniPopup:u},onLoad:function(s){this.id=s.id,e("log",s," at pages\\common\\share.vue:91"),this.shares=s,this.shares.small_images=this.shares.small_images.split(","),e("log",this.shares.small_images," at pages\\common\\share.vue:94"),e("log","http://39.108.215.49:8009/"+a.getStorageSync("invitecode")+"/"+a.getStorageSync("invitecode")+".png"," at pages\\common\\share.vue:95"),a.getSystemInfo({success:function(s){e("log",s.windowWidth," at pages\\common\\share.vue:98");var t=a.createSelectorQuery().select("#stone");t.boundingClientRect((function(s){e("log",s," at pages\\common\\share.vue:101")})).exec()}}),this.imgs.push(this.shares.imgUrl)},data:function(){return{shares:new Object,heightH:a.getSystemInfoSync().windowHeight,type:"",id:"",shareCount:0,shareImg:!1,bottomData:[{text:"微信好友",icon:"",name:"wx"},{text:"朋友圈",icon:"",name:"wx"},{text:"发圈",icon:"",name:"wx"}],tklShow:!1,syShow:!1,yqmShow:!1,linkShow:!1,imgDownloads:[!1,!1,!1,!1],imgs:[]}},onBackPress:function(e){a.setStorageSync("webview",!0)},methods:{bindTextAreaBlur:function(s){this.shares.title=s.detail.value,e("log",s.detail.value," at pages\\common\\share.vue:157")},checkboxChange:function(s,t,a){"sy"==s?this.syShow=!this.syShow:"yqm"==s?this.yqmShow=!this.yqmShow:"link"==s?this.linkShow=!this.linkShow:"tkl"==s?this.tklShow=!this.tklShow:(this.imgDownloads[a]=!this.imgDownloads[a],1==this.imgDownloads[a]?(e("log",this.imgDownloads[a]," at pages\\common\\share.vue:172"),this.imgs.push(t),e("log",this.imgs," at pages\\common\\share.vue:174"),this.imgDownloads[a]=!1):(e("log",this.imgDownloads[a]," at pages\\common\\share.vue:177"),this.imgs.splice(a,1),e("log",this.imgs," at pages\\common\\share.vue:179")))},togglePopup:function(e){this.type=e},copykey:function(s){if("tkl"==s)a.setClipboardData({data:this.shares.copykey,success:function(){a.showToast({title:"已复制"})}});else if("link"==s)a.setClipboardData({data:this.shares.item_url,success:function(){a.showToast({title:"已复制"})}});else if("wa"==s){e("log",this.shares.title," at pages\\common\\share.vue:207");var t=this.shares.title+"\n[原价] "+this.shares.zk_final_price+"\n[券后价] "+this.shares.reserve_price;e("log",this.syShow," at pages\\common\\share.vue:209"),e("log",this.yqmShow," at pages\\common\\share.vue:210"),e("log",this.linkShow," at pages\\common\\share.vue:211"),this.syShow&&(e("log",0," at pages\\common\\share.vue:213"),t+="\n[用爱省购再省] "+this.shares.yj),this.yqmShow&&(e("log",1," at pages\\common\\share.vue:216"),t+="\n[邀请码] "+this.shares.invitecode),this.linkShow&&(e("log",2," at pages\\common\\share.vue:219"),t+="\n[商品链接]\n"+this.shares.item_url),this.tklShow&&(e("log",3," at pages\\common\\share.vue:222"),t+="\n[淘口令]\n"+this.shares.copykey),a.setClipboardData({data:t,success:function(){a.showToast({title:"已复制"})}})}},saveImg:function(s,t){var i=this,n=new Array;for(var h in this.shares.small_images)e("log",this.shares.small_images[h]," at pages\\common\\share.vue:239"),n.push(this.shares.small_images[h]);if(i.type="",n.length>=1)for(var c in e("log",n.length," at pages\\common\\share.vue:257"),n){e("log",n[c]," at pages\\common\\share.vue:259");var l=o.default.load(n[c],"img"+c);c>=n.length-1&&(e("log",c," at pages\\common\\share.vue:262"),l.then((function(s){var t=r(s,2),o=t[0],n=t[1];e("log",o,n," at pages\\common\\share.vue:264"),a.hideLoading(),"saveImageToPhotosAlbum:ok"==n.errMsg&&a.showModal({content:"图片已保存至手机图库\n文案已自动复制",showCancel:!0,confirmText:"打开微信",success:function(e){e.confirm?(plus.runtime.openURL("weixin://"),i.type=""):i.type=""}})})))}else;},share:function(s){var t=this;a.showLoading({title:"请稍等...",mask:!0});"微信好友"==s?this.saveImg("WXSceneSession",0):"朋友圈"==s?this.saveImg("WXSenceTimeline",0):"QQ好友"==s?a.share({provider:"qq",type:2,imageUrl:this.shares.small_images[0],success:function(s){e("log","success:"+JSON.stringify(s)," at pages\\common\\share.vue:450")},fail:function(s){e("log","fail:"+JSON.stringify(s)," at pages\\common\\share.vue:453")}}):"发圈"==s&&(0,i.sendCircleExisit)({goodsId:this.id}).then((function(s){if(a.hideLoading(),e("log",t.id," at pages\\common\\share.vue:461"),e("log",s.data," at pages\\common\\share.vue:462"),s.data.length>0)a.showToast({title:"该商品已经发过圈啦 ！",icon:"none"});else{var o=[];e("log",t.shares.small_images," at pages\\common\\share.vue:477");var n=t.shares.small_images;for(var r in n){e("log",n[r]," at pages\\common\\share.vue:480");var h={image:n[r]};o.push(h)}var c={title:t.shares.title,pict_url:t.shares.pict_url,reserve_price:t.shares.reserve_price,zk_final_price:t.shares.zk_final_price,youhuiquan:t.shares.youhuiquan,imgSrcs:o,shareCount:t.shareCount,goodsId:t.id,comment:t.shares.copykey,invitecode:t.shares.invitecode,short_url:t.shares.short_url,yj:t.shares.yj};e("log",c," at pages\\common\\share.vue:500"),a.setStorageSync("send_circle",c),(0,i.addSendCircle)({title:t.shares.title,pict_url:t.shares.pict_url,reserve_price:t.shares.reserve_price,zk_final_price:t.shares.zk_final_price,youhuiquan:t.shares.youhuiquan,imgSrcs:t.shares.small_images.join(","),shareCount:t.shareCount,goodsId:t.id,comment:t.shares.copykey,invitecode:t.shares.invitecode,short_url:t.shares.short_url,description:t.shares.description,yj:t.shares.yj}).then((function(s){e("log",s," at pages\\common\\share.vue:517"),200==s.data.code&&a.showToast({title:"发圈成功！"})}))}}))}}};s.default=m}).call(this,t("0de9")["default"],t("6e42")["default"])},af90:function(e,s,t){"use strict";var a,o=function(){var e=this,s=e.$createElement;e._self._c},i=[];t.d(s,"b",(function(){return o})),t.d(s,"c",(function(){return i})),t.d(s,"a",(function(){return a}))},c42c:function(e,s,t){"use strict";(function(e){t("00a9"),t("921b");a(t("66fd"));var s=a(t("d216"));function a(e){return e&&e.__esModule?e:{default:e}}e(s.default)}).call(this,t("6e42")["createPage"])},d216:function(e,s,t){"use strict";t.r(s);var a=t("af90"),o=t("d481");for(var i in o)"default"!==i&&function(e){t.d(s,e,(function(){return o[e]}))}(i);t("5369");var n,r=t("f0c5"),h=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"fb126e92",null,!1,a["a"],n);s["default"]=h.exports},d481:function(e,s,t){"use strict";t.r(s);var a=t("5517"),o=t.n(a);for(var i in a)"default"!==i&&function(e){t.d(s,e,(function(){return a[e]}))}(i);s["default"]=o.a}},[["c42c","common/runtime","common/vendor"]]]);