(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/store/index"],{"2b32":function(t,e,n){"use strict";n.r(e);var a=n("bce1"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},5860:function(t,e,n){"use strict";n.r(e);var a=n("ed42"),i=n("2b32");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("eec1");var s,r=n("f0c5"),c=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"ce05d91a",null,!1,a["a"],s);e["default"]=c.exports},"755e":function(t,e,n){"use strict";(function(t){n("00a9"),n("921b");a(n("66fd"));var e=a(n("5860"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},bce1:function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("a34a")),o=n("8c24");function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,a,i,o,s){try{var r=t[o](s),c=r.value}catch(u){return void n(u)}r.done?e(c):Promise.resolve(c).then(a,i)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,c,"next",t)}function c(t){r(o,a,i,s,c,"throw",t)}s(void 0)}))}}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(){n.e("components/line").then(function(){return resolve(n("c36e"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/product-list").then(function(){return resolve(n("c398"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/uni-load-more").then(function(){return resolve(n("0b10"))}.bind(null,n)).catch(n.oe)},g={components:{dividLine:d,productList:l,uniLoadMore:h},data:function(){var t;return t={contentText:{contentdown:"上拉显示更多",contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},loadingType:0,uni:"",swiper:"",tab:"",scrolltop:0,productList:new Array(10),SEGoodsList:new Array},u(t,"loadingType",0),u(t,"imagelist",[{title:1,src:"https://img.alicdn.com/tps/i4/TB1yNlhhAvoK1RjSZFwSuwiCFXa.jpg_q90_.webp"},{title:2,src:"https://aecpm.alicdn.com/simba/img/TB1JNHwKFXXXXafXVXXSutbFXXX.jpg"},{title:3,src:"https://aecpm.alicdn.com/simba/img/TB1XotJXQfb_uJkSnhJSuvdDVXa.jpg"},{title:3,src:"https://aecpm.alicdn.com/simba/img/TB1XotJXQfb_uJkSnhJSuvdDVXa.jpg"},{title:3,src:"https://aecpm.alicdn.com/simba/img/TB1XotJXQfb_uJkSnhJSuvdDVXa.jpg"}]),u(t,"duration",300),u(t,"loadingText",{contentrefresh:"正在加载...",contentnomore:"没有更多数据了"}),u(t,"scrollLeft",0),u(t,"istapChange",!1),u(t,"tabIndex",0),u(t,"productMap",new Map),u(t,"count",0),u(t,"tabBars",[{name:"全部",id:"zb"},{name:"百货",id:"bh"},{name:"女装",id:"nz"}]),t},created:function(){this.getSEGoods()},onLoad:function(t){},methods:{SEGoods:function(){return new Promise((function(e,n){t.request({url:"http://api.gw.21ds.cn/api/taoke/get1111MaterialItem",data:{tbname:"qq470474509",apkey:"af030b85-4e9a-a924-bd79-c4a1d6ed8cae",pid:"mm_133093062_391450189_107723950192"},success:function(t){e(t.data.data),a("log",JSON.stringify(this.SEGoodsList)," at pages\\store\\index.vue:138")},fail:function(t){n(t),a("log",t," at pages\\store\\index.vue:142")}})}))},getSEGoods:function(){var t=this;this.SEGoods().then((function(e){t.SEGoodsList=e,a("log",JSON.stringify(e)," at pages\\store\\index.vue:154")}))},qrcode:function(){a("log","二维码"," at pages\\store\\index.vue:158"),t.scanCode({success:function(e){a("log","条码类型："+e.scanType," at pages\\store\\index.vue:161"),a("log","条码内容："+e.result," at pages\\store\\index.vue:162"),t.navigateTo({url:"/pages/common/web-view?src=".concat(e.result)})}})},_getData:function(){var e=this;t.showLoading({title:"加载中..",mask:!0});var n=Promise.all([(0,o.getRecommend)(),(0,o.getHotListGood)(),(0,o.getGoodsList)({page:0,type:"",screen:"",jg:""})]);n.then((function(n){if(a("log","aa",n," at pages\\store\\index.vue:183"),t.hideLoading(),n.length){var i=!0,o=!1,s=void 0;try{for(var r,c=n[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var u=r.value;if(200!=u.code)return void e._showError()}}catch(d){o=!0,s=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw s}}e.productList.splice(e.tabIndex,1,{hotGood:n[1].result,banner:e.imagelist,msg:n[0].result,product:n[2].result}),t.setStorageSync(e.tabIndex.toString(),e.productList[e.tabIndex]),a("log","第一次加载数据",e.productList," at pages\\store\\index.vue:201")}}))},godetail:function(e){t.navigateTo({url:"/pages/common/goods-detail?id=".concat(e,"&table=yhq_goods")}),this.globScrollTop=this.nowScroll},_showError:function(){t.showToast({title:"出错了...",icon:"none",mask:!0})},_getGoodsList:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t.showLoading({title:"加载中.."}),(0,o.getGoodsList)({page:n,type:a,screen:i,jg:s}).then((function(n){t.hideLoading(),200==n.code?(e.productList.splice(e.tabIndex,1,{banner:e.imagelist,msg:"",product:n.result}),t.setStorageSync(e.tabIndex.toString(),e.productList[e.tabIndex])):e._showError()}))},jump:function(e){if(this.globScrollTop=this.nowScroll,"search"!=e){var n=(new Map).set("jhs","聚划算").set("by","9.9包邮").set("tqg","淘抢购").set("tj","每日精选").set("tmjx","天猫精选");t.navigateTo({url:"/pages/common/good-item?type=".concat(e,"&title=").concat(n.get(e))})}else t.switchTab({url:"/pages/common/search"})},tapTab:function(){var e=c(i.default.mark((function e(n){var o,s,r;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.tabIndex!==n.target.dataset.current){e.next=4;break}return e.abrupt("return",!1);case 4:return o=n.target.dataset.current,a("log",o,this.tabBars[o]," at pages\\store\\index.vue:272"),0==o?"":this.tabBars[o].name,e.next=9,this.getElSize("tab-bar");case 9:if(s=e.sent,r=s.scrollLeft,this.scrollLeft=r,this.istapChange=!0,this.tabIndex=n.target.dataset.current,this.loadingType=0,!this.istapChange){e.next=19;break}return this.tabIndex=o,this.istapChange=!1,e.abrupt("return");case 19:if(this.tabIndex=o,this.loadingType=0,null,!this.productList[this.tabIndex])try{t.getStorageSync(this.tabIndex.toString()),this._getGoodsList("",this.tabBars[this.tabIndex].name,"","")}catch(n){a("log","getData",n.message," at pages\\store\\index.vue:303")}case 23:case"end":return e.stop()}}),e,this)})));function n(t){return e.apply(this,arguments)}return n}(),changeTab:function(){var e=c(i.default.mark((function e(n){var o,s,r,c,u,d,l,h,g,f;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=n.target.current,a("log","切换tab",o," at pages\\store\\index.vue:310"),0==o?"":this.tabBars[o].name,!this.istapChange){e.next=7;break}return this.tabIndex=o,this.istapChange=!1,e.abrupt("return");case 7:return e.next=9,this.getElSize("tab-bar");case 9:s=e.sent,r=s.scrollLeft,c=0,u=0;case 13:if(!(u<o)){e.next=21;break}return e.next=16,this.getElSize(this.tabBars[u].id);case 16:d=e.sent,c+=d.width;case 18:u++,e.next=13;break;case 21:return l=t.getSystemInfoSync().windowWidth,e.next=24,this.getElSize(this.tabBars[o].id);case 24:if(h=e.sent,g=h.width,c+g-r>l&&(this.scrollLeft=c+g-l),c<r&&(this.scrollLeft=c),this.istapChange=!1,this.tabIndex=o,this.loadingType=0,f=null,a("log","当前tab是否有数据",this.productList[this.tabIndex]," at pages\\store\\index.vue:340"),!this.productList[this.tabIndex])try{a("log","从缓存获取数据",this.tabIndex,f," at pages\\store\\index.vue:345"),f?this.productList.splice(this.tabIndex,1,f):this._getGoodsList("",this.tabBars[this.tabIndex].name,"","")}catch(n){a("log","getData",n.message," at pages\\store\\index.vue:354")}case 34:case"end":return e.stop()}}),e,this)})));function n(t){return e.apply(this,arguments)}return n}(),getElSize:function(e){return new Promise((function(n,a){t.createSelectorQuery().select("#"+e).fields({size:!0,scrollOffset:!0},(function(t){n(t)})).exec()}))}}};e.default=g}).call(this,n("6e42")["default"],n("0de9")["default"])},c5d4:function(t,e,n){},ed42:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement;t._self._c},o=[];n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}))},eec1:function(t,e,n){"use strict";var a=n("c5d4"),i=n.n(a);i.a}},[["755e","common/runtime","common/vendor"]]]);