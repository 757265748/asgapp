(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/store/index"],{"00e8":function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=o(n("a34a")),i=n("8c24");function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,a,s,i,o){try{var r=t[i](o),c=r.value}catch(u){return void n(u)}r.done?e(c):Promise.resolve(c).then(a,s)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(a,s){var i=t.apply(e,n);function o(t){r(i,a,s,o,c,"next",t)}function c(t){r(i,a,s,o,c,"throw",t)}o(void 0)})}}var u=function(){return n.e("components/line").then(n.bind(null,"c36e"))},l=function(){return n.e("components/scroll-index").then(n.bind(null,"d639"))},d={components:{dividLine:u,scrollIndex:l},data:function(){return{uni:"",swiper:"",tab:"",scrolltop:0,productList:new Array(10),loadingType:0,imagelist:[{title:1,src:"https://img.alicdn.com/tps/i4/TB1yNlhhAvoK1RjSZFwSuwiCFXa.jpg_q90_.webp"},{title:2,src:"https://aecpm.alicdn.com/simba/img/TB1JNHwKFXXXXafXVXXSutbFXXX.jpg"},{title:3,src:"https://aecpm.alicdn.com/simba/img/TB1XotJXQfb_uJkSnhJSuvdDVXa.jpg"},{title:3,src:"https://aecpm.alicdn.com/simba/img/TB1XotJXQfb_uJkSnhJSuvdDVXa.jpg"},{title:3,src:"https://aecpm.alicdn.com/simba/img/TB1XotJXQfb_uJkSnhJSuvdDVXa.jpg"}],duration:300,loadingText:{contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},scrollLeft:0,istapChange:!1,tabIndex:0,productMap:new Map,count:0,tabBars:[{name:"全部",id:"zb"},{name:"百货",id:"bh"},{name:"女装",id:"nz"}]}},onLoad:function(t){this._getData()},methods:{qrcode:function(){console.log(t("二维码"," at pages\\store\\index.vue:110")),a.scanCode({success:function(e){console.log(t("条码类型："+e.scanType," at pages\\store\\index.vue:113")),console.log(t("条码内容："+e.result," at pages\\store\\index.vue:114")),a.navigateTo({url:"/pages/common/web-view?src=".concat(e.result)})}})},_getData:function(){var e=this;a.showLoading({title:"加载中..",mask:!0});var n=Promise.all([(0,i.getRecommend)(),(0,i.getHotListGood)(),(0,i.getGoodsList)({page:0,type:"",screen:"",jg:""})]);n.then(function(n){if(console.log(t("aa",n," at pages\\store\\index.vue:135")),a.hideLoading(),n.length){var s=!0,i=!1,o=void 0;try{for(var r,c=n[Symbol.iterator]();!(s=(r=c.next()).done);s=!0){var u=r.value;if(200!=u.code)return void e._showError()}}catch(l){i=!0,o=l}finally{try{s||null==c.return||c.return()}finally{if(i)throw o}}e.productList.splice(e.tabIndex,1,{hotGood:n[1].result,banner:e.imagelist,msg:n[0].result,product:n[2].result}),a.setStorageSync(e.tabIndex.toString(),e.productList[e.tabIndex]),console.log(t("第一次加载数据",e.productList," at pages\\store\\index.vue:153"))}})},godetail:function(t){a.navigateTo({url:"/pages/common/goods-detail?id=".concat(t,"&table=yhq_goods")}),this.globScrollTop=this.nowScroll},_showError:function(){a.showToast({title:"出错了...",icon:"none",mask:!0})},_getGoodsList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";a.showLoading({title:"加载中.."}),(0,i.getGoodsList)({page:e,type:n,screen:s,jg:o}).then(function(e){a.hideLoading(),200==e.code?(t.productList.splice(t.tabIndex,1,{banner:t.imagelist,msg:"",product:e.result}),a.setStorageSync(t.tabIndex.toString(),t.productList[t.tabIndex])):t._showError()})},jump:function(t){if(this.globScrollTop=this.nowScroll,"search"!=t){var e=(new Map).set("jhs","聚划算").set("by","9.9包邮").set("tqg","淘抢购").set("tj","每日精选").set("tmjx","天猫精选");a.navigateTo({url:"/pages/common/good-item?type=".concat(t,"&title=").concat(e.get(t))})}else a.switchTab({url:"/pages/common/search"})},tapTab:function(){var e=c(s.default.mark(function e(n){var i,o,r;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.tabIndex!==n.target.dataset.current){e.next=4;break}return e.abrupt("return",!1);case 4:return i=n.target.dataset.current,console.log(t(i,this.tabBars[i]," at pages\\store\\index.vue:224")),0==i?"":this.tabBars[i].name,e.next=9,this.getElSize("tab-bar");case 9:if(o=e.sent,r=o.scrollLeft,this.scrollLeft=r,this.istapChange=!0,this.tabIndex=n.target.dataset.current,this.loadingType=0,!this.istapChange){e.next=19;break}return this.tabIndex=i,this.istapChange=!1,e.abrupt("return");case 19:if(this.tabIndex=i,this.loadingType=0,null,!this.productList[this.tabIndex])try{a.getStorageSync(this.tabIndex.toString()),this._getGoodsList("",this.tabBars[this.tabIndex].name,"","")}catch(n){console.log(t("getData",n.message," at pages\\store\\index.vue:255"))}case 23:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),changeTab:function(){var e=c(s.default.mark(function e(n){var i,o,r,c,u,l,d,h,g,p;return s.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=n.target.current,console.log(t("切换tab",i," at pages\\store\\index.vue:262")),0==i?"":this.tabBars[i].name,!this.istapChange){e.next=7;break}return this.tabIndex=i,this.istapChange=!1,e.abrupt("return");case 7:return e.next=9,this.getElSize("tab-bar");case 9:o=e.sent,r=o.scrollLeft,c=0,u=0;case 13:if(!(u<i)){e.next=21;break}return e.next=16,this.getElSize(this.tabBars[u].id);case 16:l=e.sent,c+=l.width;case 18:u++,e.next=13;break;case 21:return d=a.getSystemInfoSync().windowWidth,e.next=24,this.getElSize(this.tabBars[i].id);case 24:if(h=e.sent,g=h.width,c+g-r>d&&(this.scrollLeft=c+g-d),c<r&&(this.scrollLeft=c),this.istapChange=!1,this.tabIndex=i,this.loadingType=0,p=null,console.log(t("当前tab是否有数据",this.productList[this.tabIndex]," at pages\\store\\index.vue:292")),!this.productList[this.tabIndex])try{console.log(t("从缓存获取数据",this.tabIndex,p," at pages\\store\\index.vue:297")),p?this.productList.splice(this.tabIndex,1,p):this._getGoodsList("",this.tabBars[this.tabIndex].name,"","")}catch(n){console.log(t("getData",n.message," at pages\\store\\index.vue:306"))}case 34:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),getElSize:function(t){return new Promise(function(e,n){a.createSelectorQuery().select("#"+t).fields({size:!0,scrollOffset:!0},function(t){e(t)}).exec()})}}};e.default=d}).call(this,n("0de9")["default"],n("6e42")["default"])},"12c2":function(t,e,n){"use strict";var a=n("b180"),s=n.n(a);s.a},"2b32":function(t,e,n){"use strict";n.r(e);var a=n("00e8"),s=n.n(a);for(var i in a)"default"!==i&&function(t){n.d(e,t,function(){return a[t]})}(i);e["default"]=s.a},"380d":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},s=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return s})},5860:function(t,e,n){"use strict";n.r(e);var a=n("380d"),s=n("2b32");for(var i in s)"default"!==i&&function(t){n.d(e,t,function(){return s[t]})}(i);n("12c2");var o=n("2877"),r=Object(o["a"])(s["default"],a["a"],a["b"],!1,null,"c199d918",null);e["default"]=r.exports},"755e":function(t,e,n){"use strict";(function(t){n("00a9"),n("921b");a(n("66fd"));var e=a(n("5860"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},b180:function(t,e,n){}},[["755e","common/runtime","common/vendor"]]]);