(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/login"],{"1fb6":function(e,n,t){"use strict";(function(e){t("00a9"),t("921b");i(t("66fd"));var n=i(t("8725"));function i(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("6e42")["createPage"])},"2dc0":function(e,n,t){"use strict";var i=t("50dd"),o=t.n(i);o.a},"4d09":function(e,n,t){"use strict";var i,o=function(){var e=this,n=e.$createElement;e._self._c},s=[];t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return s})),t.d(n,"a",(function(){return i}))},"50dd":function(e,n,t){},"7b95":function(e,n,t){"use strict";t.r(n);var i=t("c79e"),o=t.n(i);for(var s in i)"default"!==s&&function(e){t.d(n,e,(function(){return i[e]}))}(s);n["default"]=o.a},8725:function(e,n,t){"use strict";t.r(n);var i=t("4d09"),o=t("7b95");for(var s in o)"default"!==s&&function(e){t.d(n,e,(function(){return o[e]}))}(s);t("2dc0");var a,u=t("f0c5"),r=Object(u["a"])(o["default"],i["b"],i["c"],!1,null,"05efb76f",null,!1,i["a"],a);n["default"]=r.exports},c79e:function(e,n,t){"use strict";(function(e,i){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;a(t("0b90"));var o=t("8c24"),s=t("16c7");function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){t.e("components/uni-segmented-control").then(function(){return resolve(t("9455"))}.bind(null,t)).catch(t.oe)},r={data:function(){return{items:["登录","注册"],loginyzm:"发送验证码",regyzm:"发送验证码",isabled:!1,timer:null,yqm:"",invite:"",code:"",current:1,activeColor:"#333",styleType:"button",isSend:!0,phone:"",loginerror:"请输入手机号",logintext:"",url:"",viewFlag:!1,start_time:"",end_time:"",min:10,isSendR:!1,isSendL:!1}},components:{uniSegmentedControl:u},onLoad:function(n){var t=this;e("log",i.getStorageSync("user")," at pages\\index\\login.vue:98"),n.exit&&(this.current=0),i.getStorageSync("loginFlag")&&(this.current=0),this.getInviteCode().then((function(n){t.yqm=n,e("log","yqm:"+t.yqm," at pages\\index\\login.vue:107")}))},methods:{getInviteCode:function(){return new Promise((function(n,t){var o=i.requireNativePlugin("openinstall-plugin");o.getInstall(8,(function(t){if(t.bindData){var i=JSON.parse(t.bindData).invitecode;e("log",i," at pages\\index\\login.vue:119"),e("log","getInstall : channel1="+JSON.stringify(t)+", data="+JSON.parse(t.bindData).yqm," at pages\\index\\login.vue:120"),n(i)}}))}))},back:function(){i.switchTab({url:"/pages/index/index"})},orderDate:function(n){var t,i=new Date,o=i.getFullYear(),s=i.getMonth()-2,a=i.getDate()+13,u=i.getHours(),r=i.getMinutes(),l=i.getSeconds(),c=new Date(o,s,a,u,r+n,l);o=c.getFullYear(),s=c.getMonth()-2,a=c.getDate()+13,u=c.getHours(),r=c.getMinutes(),l=c.getSeconds(),c=o+"-"+s+"-"+a+" "+u+":"+r+":"+l,t=""==t?new Date(o,s,a,u,r,l):c;var g=c;e("log",g," at pages\\index\\login.vue:155")},accessLogin:function(){(0,o.sendyzm)(this.phone).then((function(n){e("log",JSON.stringify(n)," at pages\\index\\login.vue:162")}));var n=i.requireNativePlugin("openinstall-plugin");n.getInstall(8,(function(n){n.bindData&&(e("log",JSON.stringify(n)," at pages\\index\\login.vue:170"),e("log","getInstall : channel="+n.channel+", data="+JSON.parse(n.bindData).stone," at pages\\index\\login.vue:171"))}))},register:function(){var n=this;this.checkphone()&&(0,s.postRegister)({phone:this.phone,yqm:this.yqm,code:this.code}).then((function(t){if(e("log",JSON.stringify(t)," at pages\\index\\login.vue:189"),200==t.code){i.setStorageSync("loginFlag",!0),e("log",JSON.stringify(t)," at pages\\index\\login.vue:199"),e("log",t.result," at pages\\index\\login.vue:200"),i.setStorageSync("user",t.result),i.setStorageSync("invitecode",t.result.invitecode);var o=i.requireNativePlugin("dahui-alibaichuan");o.BCAuth((function(t){i.setStorageSync("tbsqFlag",!0);var s="https://oauth.taobao.com/authorize?response_type=code&client_id=25901417&redirect_uri=http://39.108.215.49:8009/html/code.html&state="+n.phone+"&view=wap";o.BCGetCoupons(s,(function(n){e("log",s," at pages\\index\\login.vue:219"),e("log",JSON.stringify(n)," at pages\\index\\login.vue:220"),i.reLaunch({url:"/pages/index/user"})}))})),i.reLaunch({url:"/pages/index/user"}),setTimeout((function(){i.reLaunch({url:"/pages/index/user"})}),3e3)}else i.showToast({title:t.msg,icon:"none"})}))},login:function(){var n=this;e("log",this.phone,this.code," at pages\\index\\login.vue:272"),(0,s.postLogin)(this.phone,this.code).then((function(t){e("log",t," at pages\\index\\login.vue:274"),100!=t.code?t.user?(e("log","登陆!!",t.user," at pages\\index\\login.vue:280"),i.setStorageSync("user",t.user),e("log",i.getStorageSync("user")," at pages\\index\\login.vue:282"),i.switchTab({url:"/pages/index/user"})):i.showToast({title:"用户不存在!",icon:"none"}):n._showToast(t.msg,"none")}))},checkphone:function(e){var n=!1;return this.phone?/^[1][3,4,5,6,7,8][0-9]{9}$/.test(this.phone)?n=!0:(this._showToast("请输入正确的手机号码格式","none"),n=!1):(this._showToast("手机号码不能为空","none"),n=!1),n},send:function(e){var n=this;if(this.phone){var t=(0,s.sendcode)(this.phone,e);t.then((function(t){if(100!=t.code){n._showToast("验证码已发送"),n.isSend=!0;var i=null,o=60;i=setInterval((function(){"login"==e?(n.isSendL=!0,n.loginyzm=--o+"S"):"register"==e&&(n.isSendR=!0,n.regyzm=--o+"S"),0==o&&(clearInterval(i),"login"==e?(n.isSendL=!1,n.loginyzm="发送验证码"):(n.isSendR=!1,n.regyzm="发送验证码"),n.isSend=!1)}),1e3)}else n._showToast(t.msg,"none")}))}else this.phone||this._showToast("手机号码不能为空","none")},_showToast:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";i.showToast({title:e,icon:n})},onClickItem:function(e){this.current!==e&&(this.current=e)}}};n.default=r}).call(this,t("0de9")["default"],t("6e42")["default"])}},[["1fb6","common/runtime","common/vendor"]]]);