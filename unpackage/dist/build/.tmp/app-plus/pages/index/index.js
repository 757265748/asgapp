(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"33b4":function(t,e,n){"use strict";n.r(e);var a=n("4b6a"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},"4b6a":function(t,e,n){"use strict";(function(t,a){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n("a34a")),o=n("8c24");function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,a,i,o,s){try{var r=t[o](s),c=r.value}catch(d){return void n(d)}r.done?e(c):Promise.resolve(c).then(a,i)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,c,"next",t)}function c(t){r(o,a,i,s,c,"throw",t)}s(void 0)})}}var d=function(){return n.e("components/line").then(n.bind(null,"c36e"))},u=function(){return n.e("components/scroll-index").then(n.bind(null,"d639"))},l={components:{dividLine:d,scrollIndex:u},data:function(){return{uni:"",swiper:"",tab:"",scrolltop:0,productList:new Array(10),loadingType:0,imagelist:[{title:1,src:"https://img.alicdn.com/tps/i4/TB1yNlhhAvoK1RjSZFwSuwiCFXa.jpg_q90_.webp"},{title:2,src:"https://aecpm.alicdn.com/simba/img/TB1JNHwKFXXXXafXVXXSutbFXXX.jpg"},{title:3,src:"https://aecpm.alicdn.com/simba/img/TB1XotJXQfb_uJkSnhJSuvdDVXa.jpg"},{title:3,src:"https://aecpm.alicdn.com/simba/img/TB1XotJXQfb_uJkSnhJSuvdDVXa.jpg"},{title:3,src:"https://aecpm.alicdn.com/simba/img/TB1XotJXQfb_uJkSnhJSuvdDVXa.jpg"}],duration:300,loadingText:{contentrefresh:"正在加载...",contentnomore:"没有更多数据了"},scrollLeft:0,istapChange:!1,tabIndex:0,productMap:new Map,count:0,tabBars:[{name:"全部",id:"zb"},{name:"精品",id:"jp"},{name:"百货",id:"bh"},{name:"女装",id:"nz"},{name:"男装",id:"lz"},{name:"食品",id:"sp"},{name:"母婴",id:"my"},{name:"美妆",id:"mz"},{name:"洗护",id:"xh"},{name:"内衣",id:"ny"},{name:"数码",id:"sm"},{name:"家电",id:"jd"},{name:"运动",id:"yd"}]}},onLoad:function(e){console.log(t(e," at pages\\index\\index.vue:211")),this._getData()},methods:{qrcode:function(){console.log(t("二维码"," at pages\\index\\index.vue:216")),a.scanCode({success:function(e){console.log(t("条码类型："+e.scanType," at pages\\index\\index.vue:219")),console.log(t("条码内容："+e.result," at pages\\index\\index.vue:220")),a.navigateTo({url:"/pages/common/web-view?src=".concat(e.result)})}})},_getData:function(){var e=this;a.showLoading({title:"加载中..",mask:!0});var n=Promise.all([(0,o.getRecommend)(),(0,o.getHotListGood)(),(0,o.getGoodsList)({page:0,type:"",screen:"",jg:""})]);n.then(function(n){if(console.log(t("aa",n," at pages\\index\\index.vue:241")),a.hideLoading(),n.length){var i=!0,o=!1,s=void 0;try{for(var r,c=n[Symbol.iterator]();!(i=(r=c.next()).done);i=!0){var d=r.value;if(200!=d.code)return void e._showError()}}catch(u){o=!0,s=u}finally{try{i||null==c.return||c.return()}finally{if(o)throw s}}e.productList.splice(e.tabIndex,1,{hotGood:n[1].result,banner:e.imagelist,msg:n[0].result,product:n[2].result}),a.setStorageSync(e.tabIndex.toString(),e.productList[e.tabIndex]),console.log(t("第一次加载数据",e.productList," at pages\\index\\index.vue:259"))}})},godetail:function(t){a.navigateTo({url:"/pages/common/goods-detail?id=".concat(t,"&table=yhq_goods")}),this.globScrollTop=this.nowScroll},_showError:function(){a.showToast({title:"出错了...",icon:"none",mask:!0})},_getGoodsList:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";a.showLoading({title:"加载中.."}),(0,o.getGoodsList)({page:n,type:i,screen:s,jg:r}).then(function(n){a.hideLoading(),200==n.code?(console.log(t("没有数据,所以获取",e.tabIndex," at pages\\index\\index.vue:288")),console.log(t(n.result,e.imagelist," at pages\\index\\index.vue:289")),e.productList.splice(e.tabIndex,1,{banner:e.imagelist,msg:"",product:n.result}),console.log(t("没有数据所以获取完了",e.productList[e.tabIndex]," at pages\\index\\index.vue:295")),a.setStorageSync(e.tabIndex.toString(),e.productList[e.tabIndex])):e._showError()})},jump:function(e){if(console.log(t(123," at pages\\index\\index.vue:322")),this.globScrollTop=this.nowScroll,"search"!=e){var n=(new Map).set("jhs","聚划算").set("by","9.9包邮").set("tqg","淘抢购").set("tj","每日精选").set("tmjx","天猫精选");a.navigateTo({url:"/pages/common/good-item?type=".concat(e,"&title=").concat(n.get(e))})}else a.switchTab({url:"/pages/common/search"})},changeTab:function(){var e=c(i.default.mark(function e(n){var o,s,r,c,d,u,l,g,h;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=n.target.current,0==o?"":this.tabBars[o].name,!this.istapChange){e.next=6;break}return this.tabIndex=o,this.istapChange=!1,e.abrupt("return");case 6:return e.next=8,this.getElSize("tab-bar");case 8:s=e.sent,r=s.scrollLeft,c=0,d=0;case 12:if(!(d<o)){e.next=20;break}return e.next=15,this.getElSize(this.tabBars[d].id);case 15:u=e.sent,c+=u.width;case 17:d++,e.next=12;break;case 20:return l=a.getSystemInfoSync().windowWidth,e.next=23,this.getElSize(this.tabBars[o].id);case 23:if(g=e.sent,h=g.width,c+h-r>l&&(this.scrollLeft=c+h-l),c<r&&(this.scrollLeft=c),this.istapChange=!1,this.tabIndex=o,this.loadingType=0,null,!this.productList[this.tabIndex])try{a.getStorageSync(this.tabIndex.toString()),this._getGoodsList("",this.tabBars[this.tabIndex].name,"","")}catch(n){console.log(t("getData",n.message," at pages\\index\\index.vue:390"))}case 32:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),getElSize:function(t){return new Promise(function(e,n){a.createSelectorQuery().select("#"+t).fields({size:!0,scrollOffset:!0},function(t){e(t)}).exec()})},tapTab:function(){var e=c(i.default.mark(function e(n){var o,s,r;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.tabIndex!==n.target.dataset.current){e.next=4;break}return e.abrupt("return",!1);case 4:return o=n.target.dataset.current,console.log(t(o,this.tabBars[o]," at pages\\index\\index.vue:412")),0==o?"":this.tabBars[o].name,e.next=9,this.getElSize("tab-bar");case 9:if(s=e.sent,r=s.scrollLeft,this.scrollLeft=r,this.istapChange=!0,this.tabIndex=n.target.dataset.current,this.loadingType=0,!this.istapChange){e.next=19;break}return this.tabIndex=o,this.istapChange=!1,e.abrupt("return");case 19:if(this.tabIndex=o,this.loadingType=0,null,!this.productList[this.tabIndex])try{a.getStorageSync(this.tabIndex.toString()),this._getGoodsList("",this.tabBars[this.tabIndex].name,"","")}catch(n){console.log(t("getData",n.message," at pages\\index\\index.vue:443"))}case 23:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),board:function(){a.navigateTo({url:"/pages/index/board"})}}};e.default=l}).call(this,n("0de9")["default"],n("6e42")["default"])},"6daf":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i})},c8a7:function(t,e,n){"use strict";n.r(e);var a=n("6daf"),i=n("33b4");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("e1cf");var s=n("2877"),r=Object(s["a"])(i["default"],a["a"],a["b"],!1,null,"7586f0b5",null);e["default"]=r.exports},e1cf:function(t,e,n){"use strict";var a=n("f21f"),i=n.n(a);i.a},f21f:function(t,e,n){},f701:function(t,e,n){"use strict";(function(t){n("00a9"),n("921b");a(n("66fd"));var e=a(n("c8a7"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])}},[["f701","common/runtime","common/vendor"]]]);