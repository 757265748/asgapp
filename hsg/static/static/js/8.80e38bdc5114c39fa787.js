webpackJsonp([8],{"1Wj0":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var a=n("D/cR");function o(t){return Object(a.a)({url:"/api/post/pc/voucherhistory-select",method:"post",data:t})}},"3owz":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("//Fk"),o=n.n(a),i=n("Gu7T"),r=n.n(i),c=n("Dd8w"),s=n.n(c),d=n("PJh5"),u=n.n(d),l=n("rhmV"),p=n("1Wj0"),f=n("NYxO"),m=[{title:"运营商名称",dataIndex:"operatorname",scopedSlots:{customRender:"operatorname"}},{title:"合伙人编号",dataIndex:"usercode"},{title:"手机号码",dataIndex:"phone",scopedSlots:{customRender:"phone"}},{title:"本月业绩",dataIndex:"commissionmonth",scopedSlots:{customRender:"commissionmonth"}},{title:"总业绩",dataIndex:"commissiontotal",scopedSlots:{customRender:"commissiontotal"}},{title:"有效时间",dataIndex:"effectivetime",scopedSlots:{customRender:"effectivetime"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],h={mounted:function(){this.fetch()},computed:s()({},Object(f.b)(["jurisdiction"])),data:function(){return{data:[],pagination:{},loading:!1,columns:m,dateFormat:"YYYY/MM/DD"}},methods:{moment:u.a,handleTableChange:function(t,e,n){console.log(t);var a=s()({},this.pagination);a.current=t.current,this.pagination=a,this.fetch(s()({results:t.pageSize,page:t.current,sortField:n.field,sortOrder:n.order},e))},fetch:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("params:",e),this.loading=!0,Object(l.b)({}).then(function(e){console.log("请求到的数据",e);var n=s()({},t.pagination);n.total=e.data.results.length,t.loading=!1,t.data=e.data.results,t.data.forEach(function(t,e){t.key=e.toString(),t.effectivetime=t.effectivetime.slice(0,10)}),t.cacheData=t.data.map(function(t){return s()({},t)}),t.pagination=n,console.log("请求到的数据",t.data)})},handleChange:function(t,e,n,a){var o=[].concat(r()(this.data)),i=o.filter(function(t){return e===t.key})[0];i&&(i[n]=t,this.data=o)},handleAdd:function(){var t=this,e=this.data,n=e.length,a=0,i="";Object(l.c)({}),Object(p.a)({KeyCode:"operator"});o.a.all([Object(p.a)({KeyCode:"operator"}),Object(l.c)({})]).then(function(o){if(console.log("res",o[0].data.results[0].number+1),a=o[0].data.results[0].number+1,o[1].data.results.length>0){i=o[1].data.results[0].pid;var c=String.fromCharCode(a)+String.fromCharCode(a),s={OperatorPID:i,OperatorName:"",OperatorCode:c,Phone:"",EffectiveTime:new Date,editable:!0};t.data=[].concat(r()(e),[s]);var d=[].concat(r()(t.data)),u=d.filter(function(t){return n===t.key})[n];u&&(u.editable=!0,t.data=d)}else t.$message.info("没有可用的PID")})},onCellChange:function(t,e){var n=this;return function(a){var o=[].concat(r()(n.data)),i=o.find(function(e){return e.key===t});i&&(i[e]=a,n.data=o)}},onChange:function(t,e){console.log("date",e)},jump:function(t,e){"yysmyj"==t?this.$router.push({path:"/orderlist",query:{code:e.usercode.slice(0,2),type:"yysmyj"}}):"yyszyj"==t?this.$router.push({path:"/orderlist",query:{code:e.usercode.slice(0,2),type:"yyszyj"}}):this.$router.push({path:"/member-information",query:{phone:e.phone,pid:e.pid}})}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-table",{staticClass:"table",attrs:{columns:t.columns,dataSource:t.data,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"operation",fn:function(e,a,o){return[n("div",{staticClass:"editable-row-operations"},[n("span",[n("a",{on:{click:function(e){t.jump("/member-information",a)}}},[t._v("查看详情")])])])]}},{key:"EffectiveTime",fn:function(e){return[n("div",[n("a-date-picker",{attrs:{defaultValue:t.moment(e,t.dateFormat),format:t.dateFormat},on:{change:t.onChange}})],1)]}},{key:"commissionmonth",fn:function(e,a){return n("a",{staticClass:"title",on:{click:function(e){t.jump("yysmyj",a)}}},[t._v(t._s(e))])}},{key:"commissiontotal",fn:function(e,a){return n("a",{staticClass:"title",on:{click:function(e){t.jump("yyszyj",a)}}},[t._v(t._s(e))])}}])})],1)},staticRenderFns:[]};var y=n("VU/8")(h,g,!1,function(t){n("Vpfj")},"data-v-34c52068",null);e.default=y.exports},Vpfj:function(t,e){},rhmV:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"c",function(){return r}),n.d(e,"a",function(){return o});var a=n("D/cR");function o(t){return Object(a.a)({url:"api/post/pc/operatordetail-insert",method:"post",data:t})}function i(t){return Object(a.a)({url:"api/post/pc/operatordetail-select",method:"post",data:t})}function r(t){return Object(a.a)({url:"api/post/pc/pidtable",method:"post",data:t})}}});
//# sourceMappingURL=8.80e38bdc5114c39fa787.js.map